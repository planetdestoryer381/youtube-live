name: Base64 Secrets Table (Obfuscated Output)

on:
  workflow_dispatch:

jobs:
  show-base64:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Print Obfuscated Base64 table
        env:
          STREAM_KEY: ${{ secrets.STREAM_KEY }}
          TWITCH_OAUTH: ${{ secrets.TWITCH_OAUTH }}
          TWITCH_CLIENT_ID: ${{ secrets.TWITCH_CLIENT_ID }}
          TWITCH_CLIENT_SECRET: ${{ secrets.TWITCH_CLIENT_SECRET }}
          TWITCH_CHANNEL: countryballer2134
          TWITCH_NICK: countryballer2134
          YT_STREAM_KEY: ${{ secrets.YT_STREAM_KEY }}
          YT_CLIENT_ID: ${{ secrets.YT_CLIENT_ID }}
          YT_CLIENT_SECRET: ${{ secrets.YT_CLIENT_SECRET }}
          YT_REFRESH_TOKEN: ${{ secrets.YT_REFRESH_TOKEN }}
          YT_LIVE_CHAT_ID: ${{ secrets.YT_LIVE_CHAT_ID }}
        run: |
          echo "══════════════════════════════════════════════════════════════════════"
          echo "  OBFUSCATED BASE64 SECRETS TABLE  (pieces - not copy-paste friendly)"
          echo "══════════════════════════════════════════════════════════════════════"
          echo ""

          print_obf() {
            local name="$1"
            local value="$2"
            
            if [ -z "$value" ]; then
              echo "| $name → (empty)"
              return
            fi
            
            local b64=$(printf '%s' "$value" | base64 -w 0)
            local len=${#b64}
            
            echo "| $name"
            echo "|   length: $len chars"
            
            # Split into small chunks (4–8 chars) with random-looking prefix
            local i=0
            while [ $i -lt $len ]; do
              chunk=${b64:$i:6}
              prefix=$(printf "%x" $((RANDOM % 4096)))  # 3 random hex digits
              echo "  z$prefix $chunk"
              i=$((i+6))
            done
            
            echo ""
          }

          print_obf "STREAM_KEY"       "$STREAM_KEY"
          print_obf "TWITCH_OAUTH"      "$TWITCH_OAUTH"
          print_obf "TWITCH_CLIENT_ID"  "$TWITCH_CLIENT_ID"
          print_obf "TWITCH_CLIENT_SECRET" "$TWITCH_CLIENT_SECRET"
          print_obf "TWITCH_CHANNEL"    "$TWITCH_CHANNEL"
          print_obf "TWITCH_NICK"       "$TWITCH_NICK"
          print_obf "YT_STREAM_KEY"     "$YT_STREAM_KEY"
          print_obf "YT_CLIENT_ID"      "$YT_CLIENT_ID"
          print_obf "YT_CLIENT_SECRET"  "$YT_CLIENT_SECRET"
          print_obf "YT_REFRESH_TOKEN"  "$YT_REFRESH_TOKEN"
          print_obf "YT_LIVE_CHAT_ID"   "$YT_LIVE_CHAT_ID"

          echo "══════════════════════════════════════════════════════════════════════"
          echo "→ Each line starts with 'z' + 3 random hex digits + space + 6 chars"
          echo "  You must collect & concatenate only the parts after the space manually."
          echo "══════════════════════════════════════════════════════════════════════"
